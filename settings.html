<div id="qiros-settings">
  <div class="inline-drawer">
    <div class="inline-drawer-toggle inline-drawer-header">
      <b data-i18n="ext_name">Qiros</b>
      <div
        class="inline-drawer-icon fa-solid fa-circle-chevron-down down"
      ></div>
    </div>

    <div class="inline-drawer-content">
      <!-- Header Section -->
      <div class="qiros-header">
        <div id="user-info-container" style="display: none">
          <img id="user-avatar" src="" alt="User Avatar" />
          <span id="user-login"></span>
          <button
            id="github-logout-button"
            class="menu_button"
            data-i18n="logout"
          >
            Logout
          </button>
        </div>
        <div class="qiros-lang-selector-container">
          <select id="qiros-lang-select" class="text_pole">
            <option value="zh">简体中文</option>
            <option value="en">English</option>
          </select>
        </div>
      </div>

      <!-- Login View -->
      <div id="qiros-login-view">
        <div class="qiros-card">
          <h3 data-i18n="character_version_control">
            Character Version Control
          </h3>
          <p data-i18n="login_prompt">Please log in to get started.</p>
          <button id="github-login-button" class="menu_button primary">
            <i class="fa-brands fa-github"></i>
            <span data-i18n="login_with_github">Login with GitHub</span>
          </button>
        </div>
      </div>

      <!-- Main View -->
      <div id="qiros-main-view" style="display: none">
        <!-- Repository Management -->
        <div class="qiros-card" id="repo-management-container">
          <div class="qiros-section-header">
            <h4 data-i18n="repo_management">Repository Management</h4>
            <button
              id="unlink-repo-button"
              class="menu_button small-button"
              data-i18n="unlink_repo"
              style="display: none"
            >
              Unlink
            </button>
            <button
              id="fork-repo-button"
              class="menu_button small-button"
              data-i18n="fork"
            >
              Fork Repository
            </button>
            <button
              id="create-pr-button"
              class="menu_button small-button"
              data-i18n="create_pull_request"
              style="display: none"
            >
              Create Pull Request
            </button>
          </div>

          <div class="qiros-repo-info">
            <p>
              <strong data-i18n="upstream_repo">Upstream</strong>:
              <a
                id="upstream-repo-url-display"
                href="#"
                target="_blank"
                rel="noopener noreferrer"
                data-i18n="none"
                >None</a
              >
            </p>
            <p>
              <strong data-i18n="your_fork">Your Fork</strong>:
              <a
                id="fork-repo-url-display"
                href="#"
                target="_blank"
                rel="noopener noreferrer"
                data-i18n="none"
                >None</a
              >
            </p>
            <p>
              <strong data-i18n="character_version">Version</strong>:
              <span id="character-version-display" data-i18n="none">None</span>
            </p>
          </div>

          <div id="repo-initial-actions">
            <input
              type="text"
              id="repo-url-input"
              class="text_pole"
              data-i18n-placeholder="repo_url_placeholder"
              placeholder="https://github.com/user/repo.git"
            />
            <div class="qiros-button-group">
              <button
                id="associate-repo-button"
                class="menu_button"
                data-i18n="link_repo"
              >
                Link
              </button>
              <button
                id="create-repo-button"
                class="menu_button"
                data-i18n="create_new_repo"
              >
                Create
              </button>
            </div>
          </div>
        </div>

        <!-- Branch & Actions -->
        <div class="qiros-card">
          <div class="qiros-section-header">
            <h4 data-i18n="branches_actions">Branches & Actions</h4>
          </div>
          <div id="branch-management-container" class="qiros-input-group">
            <label for="branch-select" data-i18n="current_branch">Branch</label>
            <select id="branch-select" class="text_pole"></select>
            <button
              id="new-branch-button"
              class="menu_button"
              data-i18n="new_branch"
            >
              New
            </button>
          </div>

          <div class="qiros-button-group">
            <button
              id="check-updates-button"
              class="menu_button"
              data-i18n="check_for_updates"
            >
              Check for Updates
            </button>
            <button
              id="pull-button"
              class="menu_button"
              data-i18n="pull_and_overwrite"
            >
              Pull & Overwrite
            </button>
          </div>

          <div
            id="push-target-container"
            class="qiros-input-group"
            style="display: none"
          >
            <label for="push-target-select" data-i18n="push_target"
              >Push Target</label
            >
            <select id="push-target-select" class="text_pole">
              <option value="fork" data-i18n="your_fork">Your Fork</option>
              <option value="upstream" data-i18n="upstream_repo">
                Upstream
              </option>
            </select>
          </div>

          <div class="qiros-input-group">
            <input
              type="text"
              id="commit-message"
              class="text_pole"
              data-i18n-placeholder="commit_message"
              placeholder="Describe your changes..."
            />
            <button
              id="push-button"
              class="menu_button primary"
              data-i18n="push_changes"
            >
              Push
            </button>
          </div>

          <div class="qiros-fork-actions" style="display: none">
            <button
              id="create-pr-button"
              class="menu_button"
              data-i18n="create_pull_request"
              style="display: none"
            >
              Create Pull Request
            </button>
          </div>
        </div>

        <!-- Advanced Actions -->
        <div class="qiros-card">
          <div class="qiros-section-header">
            <h4 data-i18n="advanced_actions">Advanced Actions</h4>
          </div>
          <div class="qiros-button-group">
            <button
              id="history-button"
              class="menu_button"
              data-i18n="view_history"
            >
              View History
            </button>
            <button
              id="release-button"
              class="menu_button"
              data-i18n="release_new_version"
            >
              Create Release
            </button>
          </div>
        </div>

        <!-- History Details -->
        <div
          id="history-details-section"
          class="qiros-card"
          style="display: none"
        >
          <h4 data-i18n="version_history">Version History (character.json)</h4>
          <div id="history-list" class="history-list">
            <p data-i18n="loading_history">Loading history...</p>
          </div>
          <button
            id="revert-button"
            class="menu_button"
            data-i18n="revert_to_selected"
            disabled
          >
            Revert to Selected Version
          </button>
          <div
            id="history-diff-container"
            class="history-diff-container"
            style="display: none"
          >
            <h5 data-i18n="commit_changes">Changes in this commit</h5>
            <pre id="history-diff-view"></pre>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
